<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <!--<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"-->
  <!--integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="-->
  <!--crossorigin=""/>-->
  <!--<link rel="stylesheet" href="css/timeliner.css" type="text/css" media="screen">-->

  <!-- Import leaflet.js javascript API library -->
  <!--<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"-->
  <!--integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="-->
  <!--crossorigin=""></script>-->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- Card-Flip CSS -->
  <link rel="stylesheet" type="text/css" href="css/dashboard.css">

  <!-- Title -->
  <title>Video Game Visualization</title>
</head>
<style>
  /* Small devices (landscape phones, 576px and up) */
  @media (min-width: 576px) {
  }

  /* Medium devices (tablets, 768px and up) */
  @media (min-width: 768px) {
  }

  /* Large devices (desktops, 992px and up) */
  @media (min-width: 992px) {
  }

  /* Extra large devices (large desktops, 1200px and up) */
  @media (min-width: 1200px) {
  }

  /* Small devices (landscape phones, 576px and up) */
  @media (min-width: 576px) {
  }

  /* Medium devices (tablets, 768px and up) */
  @media (min-width: 768px) {
  }

  /* Large devices (desktops, 992px and up) */
  @media (min-width: 992px) {
  }

  /* Extra large devices (large desktops, 1200px and up) */
  @media (min-width: 1200px) {
  }

  body {
    font-family: Sans-serif;
    font-size: 11px;
  }

  /* Sunburst */
  .slice {
    cursor: pointer;
  }

  .slice .main-arc {
    stroke: #fff;
    stroke-width: 1px;
  }

  .slice .hidden-arc {
    fill: none;
  }

  .slice text {
    pointer-events: none;
    dominant-baseline: middle;
    text-anchor: middle;
  }

  /*Card Carousel */
  #card-carousel {
    width: 50%;
    background-color: #7DBADF;
  }

  .card {
    width: 100%
  }
</style>

<body onload="readFiles();">
<div id="gameDashboard">
  <h1 id="vgdashtitle" style="text-align: center" class="display-1"></h1>
  <hr>
  <div id="stockLine"></div>
  <div id="summary"><span id="summaryText"></span></div>
</div>

<!-- carousel -->
<div id="card-carousel">
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <!-- #1 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame0">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank0"></li>
                <li class="list-group-item" id="topGameGenre0"></li>
                <!--<li class="list-group-item" id="topGamePlatform0"></li>-->
                <li class="list-group-item" id="topGameSales0"></li>
                <li class="list-group-item" id="topGameYear0"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar0"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #2 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame1">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank1"></li>
                <li class="list-group-item" id="topGameGenre1"></li>
                <!--<li class="list-group-item" id="topGamePlatform1"></li>-->
                <li class="list-group-item" id="topGameSales1"></li>
                <li class="list-group-item" id="topGameYear1"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar1"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #3 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame2">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank2"></li>
                <li class="list-group-item" id="topGameGenre2"></li>
                <!--<li class="list-group-item" id="topGamePlatform2"></li>-->
                <li class="list-group-item" id="topGameSales2"></li>
                <li class="list-group-item" id="topGameYear2"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar2"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #4 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame3">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank3"></li>
                <li class="list-group-item" id="topGameGenre3"></li>
                <!--<li class="list-group-item" id="topGamePlatform3"></li>-->
                <li class="list-group-item" id="topGameSales3"></li>
                <li class="list-group-item" id="topGameYear3"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar3"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #5 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame4">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank4"></li>
                <li class="list-group-item" id="topGameGenre4"></li>
                <!--<li class="list-group-item" id="topGamePlatform4"></li>-->
                <li class="list-group-item" id="topGameSales4"></li>
                <li class="list-group-item" id="topGameYear4"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar4"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #6 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame5">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank5"></li>
                <li class="list-group-item" id="topGameGenre5"></li>
                <!--<li class="list-group-item" id="topGamePlatform5"></li>-->
                <li class="list-group-item" id="topGameSales5"></li>
                <li class="list-group-item" id="topGameYear5"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar5"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #7 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame6">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank6"></li>
                <li class="list-group-item" id="topGameGenre6"></li>
                <!--<li class="list-group-item" id="topGamePlatform6"></li>-->
                <li class="list-group-item" id="topGameSales6"></li>
                <li class="list-group-item" id="topGameYear6"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar6"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #8 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame7">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank7"></li>
                <li class="list-group-item" id="topGameGenre7"></li>
                <!--<li class="list-group-item" id="topGamePlatform7"></li>-->
                <li class="list-group-item" id="topGameSales7"></li>
                <li class="list-group-item" id="topGameYear7"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar7"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #9 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame8">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank8"></li>
                <li class="list-group-item" id="topGameGenre8"></li>
                <!--<li class="list-group-item" id="topGamePlatform8"></li>-->
                <li class="list-group-item" id="topGameSales8"></li>
                <li class="list-group-item" id="topGameYear8"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar8"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <!-- #10 card -->
        <div class="flip">
          <div class="card">
            <div class="face front">
              <img class="card-img-top" src="images/Untitled.png" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title" id="topGame9">Card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                  card's
                  content.</p>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item" id="topGameRank9"></li>
                <li class="list-group-item" id="topGameGenre9"></li>
                <!--<li class="list-group-item" id="topGamePlatform9"></li>-->
                <li class="list-group-item" id="topGameSales9"></li>
                <li class="list-group-item" id="topGameYear9"></li>
              </ul>
              <div class="card-body">
                <a class="btn card-btn btn-primary">Compare to other bestsellers</a>
              </div>
            </div>
            <div class="face back">
              <div class="card-body">
                <div id="bar9"></div>
                <a class="btn card-btn btn-primary">Back to Game Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<script src='https://d3js.org/d3.v4.min.js'></script>
<script src="js/dataReading.js"></script>
<script src="js/sunburst.js"></script>
<script src="js/readStocks.js"></script>
<script src="js/drawStocks.js"></script>
<script src="js/traceMaker.js"></script>

<script type="text/javascript">
  function doneLoadingData() {
    // This is to get the value that was passed!
    document.getElementById('vgdashtitle').innerText = localStorage.getItem("chosenCompany") + ' Dashboard';

    // Card Carousel
    $('.carousel').carousel();
    getTopGames();

    for (let i = 0; i < 10; i++) {
      document.getElementById('topGame' + i).innerText = localStorage.getItem("topGame" + i);
      document.getElementById('topGameRank' + i).innerText = '#' + (i + 1) + ' Bestseller';
      document.getElementById('topGameGenre' + i).innerText = 'Genre: ' + localStorage.getItem("topGameGenre" + i);
      // document.getElementById('topGamePlatform' + i).innerText = 'Platform: ' + localStorage.getItem("topGamePlatform" + i);
      document.getElementById('topGameSales' + i).innerText = 'Global Sales: ' + localStorage.getItem("topGameSales" + i) + ' million copies sold';
      document.getElementById('topGameYear' + i).innerText = 'Release Year: ' + localStorage.getItem("topGameYear" + i);
    }

    // Card Flip
    $('.flip').find('.card-btn').click(function () {
      $(this).closest('.card').toggleClass('flipped');
    });

    // Sunburst
    var genres = [];
    var regions = ['Other_Sales', 'EU_Sales', 'NA_Sales', 'JP_Sales'];
    var genreSales = [];
    var regionSales = [];
    var genreRegionSales = {
      name: localStorage.getItem("chosenCompany"),
      children: []
    };

    for (let i = 0; i < vgsData.length; i++) {
      genres.push(vgsData[i].Genre);
    }
    genres = [... new Set(genres)];
    genres.pop();
    // console.log(vgsData);
    // console.log(genres);
    for (let i = 0; i < genres.length; i++) {
      genreRegionSales.children.push({
        name: genres[i],
        children: [
          {
            name: 'NA',
            size: 0
          },
          {
            name: 'JP',
            size: 0
          },
          {
            name: 'EU',
            size: 0
          },
          {
            name: 'OTH',
            size: 0
          }
        ]
      });
    }
    for (let i = 0; i < vgsData.length; i++) {
      for (let j = 0; j < genreRegionSales.children.length; j++) {
        if (vgsData[i].Genre == genreRegionSales.children[j].name && vgsData[i].Publisher == localStorage.getItem("chosenCompany")) {
          genreRegionSales.children[j].children[0].size += parseFloat(vgsData[i].NA_Sales);
          genreRegionSales.children[j].children[1].size += parseFloat(vgsData[i].JP_Sales);
          genreRegionSales.children[j].children[2].size += parseFloat(vgsData[i].EU_Sales);
          genreRegionSales.children[j].children[3].size += parseFloat(vgsData[i].Other_Sales);
        }
      }
    }
    newSunBurst(genreRegionSales);
  }
</script>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>
<!--<script type="text/javascript" src="js/timeliner.js"></script>-->
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
</body>
</html>
